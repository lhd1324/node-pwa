webpackJsonp([1],{"6bta":function(e,t){},EXS4:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),s=a.n(o),n=a("//Fk"),i=a.n(n),r=a("7+uW"),u={name:"App",data:function(){return{grouplist:[],userlist:[],footerstate:!0}},created:function(){this.getstatus()},methods:{getstatus:function(){var e=this;this.$root.createws({url:this.$root.baseurl+"/login/",data:{name:"aaaaaaaaaa"},success:function(t){e.grouplist=t.data.data,console.log(e.grouplist)},error:function(){}})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view"),e._v(" "),e.footerstate?a("footer",[a("router-link",{staticClass:"home",attrs:{to:{name:"list"}}},[a("figure",[a("div"),e._v(" "),a("p",[e._v("首页")])])]),e._v(" "),a("router-link",{staticClass:"person",attrs:{to:{name:"vdetail",params:{user:"0",id:"0"}}}},[a("figure",[a("div"),e._v(" "),a("p",[e._v("个人中心")])])])],1):e._e()],1)},staticRenderFns:[]};var l=a("VU/8")(u,c,!1,function(e){a("m6QC"),a("6bta")},null,null).exports,d=a("/ocq"),f=a("woOf"),p=a.n(f),v=a("bOdI"),g=a.n(v),m={name:"list",data:function(){var e;return e={userlist:[],grouplist:[]},g()(e,"grouplist",[]),g()(e,"userlist",[]),g()(e,"key",""),g()(e,"show",!1),g()(e,"showlist",!1),g()(e,"searchstate",!1),g()(e,"headerstate",!0),g()(e,"footerstate",!0),e},watch:{show:function(){console.log(88888)}},created:function(){this.getgrouplist()},methods:{getgrouplist:function(){var e=this;this.$root.createws({url:this.$root.baseurl+"/searchgrouplist/",data:{name:"aaaaaaaaaa"},success:function(t){console.log(t),e.grouplist=t.data.data,e.getuserlist()},error:function(){}})},getuserlist:function(e){var t=this;e||(e=""),this.$root.createws({url:this.$root.baseurl+"/searchuser/",data:{groupid:e},success:function(e){for(var a=0;a<t.grouplist.length;a++)for(var o=0;o<e.data.data.length;o++)t.grouplist[a]._id==e.data.data[o].groupid&&p()(e.data.data[o],{groupname:t.grouplist[a].groupname});t.userlist=e.data.data,t.show=!1},error:function(){}})},getkeyword:function(e){var t=this;e||(e=""),this.$root.createws({url:this.$root.baseurl+"/keysearchuser/",data:{key:e},success:function(e){for(var a=0;a<t.grouplist.length;a++)for(var o=0;o<e.data.data.length;o++)t.grouplist[a]._id==e.data.data[o].groupid&&p()(e.data.data[o],{groupname:t.grouplist[a].groupname});t.userlist=e.data.data,t.searchstate=!1},error:function(){}})},enterdetail:function(e){console.log(this.$router),this.$router.push({name:"vdetail",params:{user:0,id:e}})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[e.headerstate?a("header",[a("div",{staticClass:"meaubtn",on:{click:function(t){e.show=!0}}}),a("span",[e._v("相遇")]),e._v(" "),a("a",{staticClass:"searchbtn",on:{click:function(t){e.searchstate=!0}}})]):e._e(),e._v(" "),a("div",{staticClass:"content"},[a("ul",{staticClass:"list"},e._l(e.userlist,function(t,o){return a("li",{on:{click:function(a){e.enterdetail(t._id)}}},[t.headimg?a("div",{staticClass:"headimg"},[a("img",{attrs:{src:"/pwatest/headimg/"+t.headimg}})]):e._e(),e._v(" "),a("div",{staticClass:"info"},[t.name?a("p",[e._v("姓名："+e._s(t.name))]):e._e(),e._v(" "),t.job?a("p",[e._v("职位："+e._s(t.job))]):e._e(),e._v(" "),t.phone?a("p",[e._v("手机号码："+e._s(t.phone))]):e._e(),e._v(" "),t.email?a("p",[e._v("emial："+e._s(t.email))]):e._e()])])}))]),e._v(" "),a("transition",{attrs:{name:"searchslide"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.searchstate,expression:"searchstate"}],staticClass:"searchbox"},[a("div",{staticClass:"hidesearch",on:{click:function(t){t.stopPropagation(),e.getkeyword(e.key)}}},[e._v("←")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.key,expression:"key"}],attrs:{type:"text",placeholder:"请输入搜索词"},domProps:{value:e.key},on:{input:function(t){t.target.composing||(e.key=t.target.value)}}}),e._v(" "),a("div",{staticClass:"clear",on:{click:function(t){t.stopPropagation(),e.searchstate=!1}}},[e._v("×")])])]),e._v(" "),a("transition",{attrs:{name:"fadeslide"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"grouplist"},[a("div",{staticClass:"leftlist"},[a("h4",[a("a",{on:{click:function(t){t.stopPropagation(),e.show=!1}}}),a("span",[e._v("组别列表")])]),e._v(" "),a("ul",{staticClass:"item"},e._l(e.grouplist,function(t,o){return a("li",{on:{click:function(a){e.getuserlist(t._id)}}},[e._v(e._s(t.groupname))])}))])])])],1)},staticRenderFns:[]};var _=a("VU/8")(m,h,!1,function(e){a("EXS4")},"data-v-4c6fc7a4",null).exports,w={name:"vdetail",data:function(){return{msg:"Welcome to Your Vue.js App",userinfo:{},id:"",showdetail:!1}},watch:{$route:function(e,t){this.init()}},created:function(){this.init()},methods:{init:function(){this.id=this.$route.params.id,0!=this.$route.params.id?this.getuserdetails():this.getcuruserdetails()},getuserdetails:function(){var e=this;this.$root.createws({url:this.$root.baseurl+"/getdetail/",data:{id:e.id},success:function(t){e.userinfo=t.data.data[0]},error:function(){}})},getcuruserdetails:function(){var e=this;this.$root.createws({url:this.$root.baseurl+"/getuserdetail/",data:{},success:function(t){console.log(t),t.succ&&(e.userinfo=t.data.data[0],console.log(e.userinfo.name))},error:function(){}})},outlogin:function(){"serviceWorker"in navigator&&(console.log(this.$root.SW),this.$root.SW&&this.$root.SW.unregister()),window.location="/login.html"}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("a",{staticClass:"outlogin",on:{click:function(t){e.outlogin()}}},[e._v("退出")]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"content"},[0==e.id?a("router-link",{attrs:{to:{name:"editinfo"}}},[a("div",{staticClass:"enteredit"},[a("div",{staticClass:"editicon"},[a("i")])])]):e._e(),e._v(" "),a("div",{staticClass:"headimg"},[e.userinfo.headimg?a("img",{attrs:{src:"/pwatest/headimg/"+e.userinfo.headimg}}):e._e()]),e._v(" "),a("ul",{staticClass:"userinfo"},[e.userinfo.name?a("li",[a("strong",[e._v("姓名:")]),a("span",[e._v(e._s(e.userinfo.name))])]):e._e(),e._v(" "),e.userinfo.groupid?a("li",[a("strong",[e._v("组别:")]),a("span",[e._v("java组")])]):e._e(),e._v(" "),e.userinfo.job?a("li",[a("strong",[e._v("职位:")]),a("span",{domProps:{innerHTML:e._s(e.userinfo.job)}})]):e._e(),e._v(" "),e.userinfo.phone?a("li",[a("strong",[e._v("联系方式:")]),a("span",[e._v(e._s(e.userinfo.phone))])]):e._e(),e._v(" "),e.userinfo.email?a("li",[a("strong",[e._v("邮箱:")]),a("span",[e._v(e._s(e.userinfo.email))])]):e._e(),e._v(" "),e.userinfo.detail?a("li",[a("strong",[e._v("其他信息:")]),a("span",{domProps:{innerHTML:e._s(e.userinfo.detail)}})]):e._e()])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("span",[this._v("相遇")])])}]};var $=a("VU/8")(w,b,!1,function(e){a("VtP/")},"data-v-59c6bb93",null).exports,k={name:"vdetail",data:function(){return{msg:"Welcome to Your Vue.js App",grouplist:[],userinfo:{name:"",groupname:"",job:"",phone:"",email:"",detail:""},errorinfo:""}},created:function(){this.getgrouplist()},methods:{getgrouplist:function(){var e=this;this.$root.createws({url:this.$root.baseurl+"/searchgrouplist/",data:{name:"aaaaaaaaaa"},success:function(t){e.grouplist=t.data.data,e.getcuruserinfo()},error:function(){}})},getcuruserinfo:function(){var e=this;this.$root.createws({url:this.$root.baseurl+"/getuserdetail/",data:{},success:function(t){console.log(t);for(var a=0;a<e.grouplist.length;a++)if(e.grouplist[a]._id==t.data.data[0].groupid){p()(t.data.data[0],{groupname:e.grouplist[a].groupname});break}e.userinfo=t.data.data[0],console.log(e.userinfo.name)},error:function(){}})},updateuserinfo:function(){var e=this;for(var t in e.userinfo)if(console.log(e.userinfo[t]),e.testcheck(e.userinfo[t]))return e.errorinfo=t+"不能为空白字符!",void setTimeout(function(){e.errorinfo=""},2e3);return e.userinfo.phone.length>0&&(console.log(e.phonecheck(e.userinfo.phone)),!e.phonecheck(e.userinfo.phone))?(e.errorinfo="手机号码格式不正确!",void setTimeout(function(){e.errorinfo=""},2e3)):e.userinfo.email.length>0&&(console.log(e.emailcheck(e.userinfo.email)),!e.emailcheck(e.userinfo.email))?(e.errorinfo="邮箱格式不正确!",void setTimeout(function(){e.errorinfo=""},2e3)):void this.$root.createws({url:this.$root.baseurl+"/updatedetail/",data:{job:e.userinfo.job,phone:e.userinfo.phone,email:e.userinfo.email,detail:e.userinfo.detail},success:function(t){console.log(t),t.succ&&e.$router.push({name:"vdetail",params:{user:0,id:0}})},error:function(){}})},emailcheck:function(e){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(e)},phonecheck:function(e){return/^1[3|4|5|7|8][0-9]{9}$/.test(e)},testcheck:function(e){return e.match(/^\s+$/)},uploadheadimg:function(){console.log(event.target.files[0]);var e=this;this.$root.createws({url:this.$root.baseurl+"/uploadheadimg/",data:{flag:"binary",file:event.target.files[0]},success:function(t){console.log(t),e.userinfo.headimg=t.data.headimg,console.log(e.userinfo.headimg)},error:function(){}})},goback:function(){history.go(-1)}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[e._m(0),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"uploadheadimg"},[a("img",{attrs:{src:"/pwatest/headimg/"+e.userinfo.headimg}}),e._v(" "),a("div",{staticClass:"uploadbtn"},[a("span",[e._v("上传个人照")]),a("input",{attrs:{type:"file"},on:{change:function(t){e.uploadheadimg()}}})])]),e._v(" "),a("ul",{staticClass:"userinfo"},[a("li",[a("strong",[e._v("姓名:")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.name,expression:"userinfo.name"}],attrs:{type:"text",disabled:"disabled"},domProps:{value:e.userinfo.name},on:{input:function(t){t.target.composing||e.$set(e.userinfo,"name",t.target.value)}}})])]),e._v(" "),a("li",[a("strong",[e._v("组别:")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.groupname,expression:"userinfo.groupname"}],attrs:{type:"text",disabled:"disabled"},domProps:{value:e.userinfo.groupname},on:{input:function(t){t.target.composing||e.$set(e.userinfo,"groupname",t.target.value)}}})])]),e._v(" "),a("li",[a("strong",[e._v("职位:")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.job,expression:"userinfo.job"}],attrs:{type:"text",maxlength:"10",placeholder:"最多10字！"},domProps:{value:e.userinfo.job},on:{input:function(t){t.target.composing||e.$set(e.userinfo,"job",t.target.value)}}})])]),e._v(" "),a("li",[a("strong",[e._v("联系方式:")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.phone,expression:"userinfo.phone"}],attrs:{type:"text",maxlength:"11"},domProps:{value:e.userinfo.phone},on:{input:function(t){t.target.composing||e.$set(e.userinfo,"phone",t.target.value)}}})])]),e._v(" "),a("li",[a("strong",[e._v("邮箱:")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.email,expression:"userinfo.email"}],attrs:{type:"text"},domProps:{value:e.userinfo.email},on:{input:function(t){t.target.composing||e.$set(e.userinfo,"email",t.target.value)}}})])]),e._v(" "),a("li",[a("strong",[e._v("其他信息:")]),a("span",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.detail,expression:"userinfo.detail"}],domProps:{value:e.userinfo.detail},on:{input:function(t){t.target.composing||e.$set(e.userinfo,"detail",t.target.value)}}})])]),e._v(" "),a("li",{staticClass:"operbtn"},[a("span",{staticClass:"sub",on:{click:function(t){e.updateuserinfo()}}},[e._v("保存")]),e._v(" "),a("span",{staticClass:"exit",on:{click:function(t){e.goback()}}},[e._v("取消")])])])]),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.errorinfo.length>0?a("div",{staticClass:"errorinfo"},[a("p",[e._v(e._s(e.errorinfo))])]):e._e()])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("span",[this._v("相遇")])])}]};var x=a("VU/8")(k,C,!1,function(e){a("VJo9")},"data-v-3ee3649f",null).exports;r.a.use(d.a);var y=new d.a({routes:[{path:"/",name:"list",component:_},{path:"/editinfo",name:"editinfo",component:x},{path:"/vdetail/:user/:id",name:"vdetail",component:$}]});r.a.config.productionTip=!1,new r.a({el:"#app",data:function(){return{baseurl:"ws://127.0.0.1:80",SW:""}},router:y,components:{App:l},template:"<App/>",created:function(){this.createws({url:this.baseurl+"/login/",data:{name:"aaaaaaaaaa"},success:function(e){console.log(e),e.succ},error:function(e){e.succ||(location.href="/pwatest/static/login.html")}})},mounted:function(){var e=this;if("serviceWorker"in navigator){navigator.serviceWorker.register("/pwatest/static/sw.js",{scope:"/pwatest/static/"}).then(function(t){e.SW=t,"PushManager"in window&&new i.a(function(e,t){var a=Notification.requestPermission(function(t){e(t)});a&&a.then(e)}).then(function(e){"granted"===e||console.log("no permission")})}).catch(function(e){console.log("ServiceWorker registration failed: ",e)})}},methods:{createws:function(e){var t=new WebSocket(e.url);e.data.flag?t.onopen=function(a){t.send(e.data.file)}:t.onopen=function(a){t.send(s()(e.data))},t.onmessage=function(a){JSON.parse(a.data).succ?e.success(JSON.parse(a.data)):e.error(JSON.parse(a.data)),t.close()},t.onclose=function(e){console.log("Connection closed.")}}}})},VJo9:function(e,t){},"VtP/":function(e,t){},m6QC:function(e,t){}},["NHnr"]);